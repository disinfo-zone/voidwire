---
interface Props {
  title: string;
  body: string;
  date_context: string;
  word_count?: number;
  has_extended?: boolean;
}

const { title, body, date_context, word_count, has_extended } = Astro.props;

// Convert body text: split on double newlines into paragraph tags
const paragraphs = body
  .split(/\n\n+/)
  .filter((p: string) => p.trim().length > 0)
  .map((p: string) => `<p>${p.trim()}</p>`)
  .join('\n');
---

<article class="reading">
  <header style="padding: 2.5rem 1.5rem 0;">
    <h1 class="reading-title">{title}</h1>
    <div class="reading-subtitle">
      {date_context}
      {word_count && <span>&nbsp;&middot;&nbsp;{word_count} words</span>}
    </div>
  </header>

  <div class="reading-body" set:html={paragraphs} />

  {has_extended && (
    <div style="text-align: center; padding-bottom: 2rem;">
      <a href="/v1/reading/today/extended" class="extend-btn">
        Continue reading &rarr;
      </a>
    </div>
  )}
</article>

<style>
  .reading {
    padding-bottom: 3rem;
  }
</style>
